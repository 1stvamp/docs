<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Juju Documentation - Charm contents</title>
  <link href='https://fonts.googleapis.com/css?family=Ubuntu:400,300,300italic,400italic,700,700italic|Ubuntu+Mono' rel='stylesheet' type='text/css' />
  <link rel="stylesheet" type="text/css" media="screen" href="//juju.ubuntu.com/wp-content/themes/juju-website/css/reset.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="//juju.ubuntu.com/wp-content/themes/juju-website/css/960.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="//juju.ubuntu.com/wp-content/themes/juju-website/css/base.css" />
  <link rel="stylesheet" type="text/css" media="screen" href="//juju.ubuntu.com/wp-content/themes/juju-website/css/home-new.css" />
  <link rel='stylesheet' id='stacktack-css'  href='//juju.ubuntu.com/wp-content/plugins/stacktack/css/stacktack.min.css?ver=3.4.2' type='text/css' media='all' />
  <link href="css/main.css?1375975745" rel="stylesheet" type="text/css"/>

  <!--[if lt IE 9]>
  <script type="text/javascript" src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
  <body class="resources">
    <header class="global clearfix" role="banner">
  <div class="header-navigation">
    <div>
      <nav role="navigation">
        <ul>
          <li class="page_item page-item-6"><a href="https://juju.ubuntu.com/">Home</a></li>
          <li class="page_item page-item-7"><a href="https://juju.ubuntu.com/get-started/">Get started</a></li>
          <li class="page_item page-item-9 current_page_item"><a href="https://juju.ubuntu.com/resources/">Resources</a></li>
          <li class="page_item page-item-13"><a href="https://juju.ubuntu.com/community/">Community</a></li>
          <li class="page_item page-item-3688"><a href="https://juju.ubuntu.com/charm-store/">Charm Store</a></li>
          <li class="page_item page-item-3691"><a href="https://juju.ubuntu.com/events/">Events</a></li>
          <li class="page_item page-item-4474"><a href="https://juju.ubuntu.com/charm-championship/">Charm Championship</a></li>
          <li class="page_item page-item-4249"><a href="https://juju.ubuntu.com/survey/">Survey</a></li>
          <li>
            <form id="form-search" method="get" action="https://juju.ubuntu.com/">
              <fieldset>
                <input id="input-search" type="text" name="s" value="Search" />
              </fieldset>
            </form>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <div class="header-content">
    <div class="clearfix">
      <img src="https://juju.ubuntu.com/wp-content/themes/juju-website/img/arrow-nav.png" width="9" height="5" style="left:455px; display: block;" class="arrow-nav">
      <div class="header-navigation-secondary"></div>
      <div class="header-image"></div>
      <h1>Resources</h1>
      <h2>A collection of some of the most important online references for Juju users and developers.</h2>
    </div>
  </div>
</header>

    <section id="content" class="container-12">
      <div class="grid-12 doc-container">
		<div id="navlinks" class="grid-3 doc-navigation">LINKS</div>
        <div class="grid-9 doc-content">
          <article>

<section id="charm-contents">
<h1>Charm contents</h1>
<p>Conceptually, charms are composed of metadata, configuration, and hooks. Other
files may be present in a charm directory for a variety of reasons.</p>
</section>

<section id="required-files">
<h2>Required files</h2>
<p>A charm requires only a single file in order to be considered valid by juju:
<ul>
<li><code>metadata.yaml</code> <a href="./authors-charm-metadata.html">describes the
    charm</a> and the relations it can participate in.</li>
</ul>
</section>

<section id="special-files">
<h2>Special files</h2>
<p>The following files will be treated specially, if present:</p>
<ul>
    <li><code>hooks</code> must be a directory holding <a href="./authors-hook-kinds.html">
    executables with specific names</a>, that will be invoked by juju at specific times.
    A charm needs to implement at least one hook in order to do anything at all.</li>
    <li><code>config.yaml</code> defines <a href="./authors-charm-config.html">
    service configuration options</a>.</li>
    <li><code>icon.svg</code> is used to <a href="./authors-charm-icon.html">identify
    your charm</a> in the GUI and in the charm store.</li>
    <li><code>README</code> is made available in the charm store. It should be
    comprehensible to a reasonably ignorant user.</li>
    <li><code>revision</code> should not be used other than by juju; ignore it
    in your VCS.</li>
    <li> files matching <code>.juju*</code> should not be used.</li>
</ul>
</section>

<section id="other-files">
<h2>Other files</h2>

<p>Any other files you know you'll need can be placed in the charm for convenience.
We recommend reserving the hooks directory for hooks alone, and putting library
code elsewhere in the charm, but we do not enforce the contents of the hooks
directory today.</p>

<p>When hooks are actually running, they can read and write to the charm directory
freely, but should carefully observe the caveats in the next section.</p>
</section>

<section id="runtime-files">
<h2>Charm files at runtime</h2>

<p>However, the files you use in your charm should <em>not</em> be used directly by the
software installed by your charm. If the files are really needed by the software
at runtime, copy them on the system alongside the software and reference those
instead.</p>

<p>This is because the software does <em>not</em> have control over the charm directory;
<em>juju</em> has control over the charm directory, which it temporarily cedes to the
charm only when running a hook. Juju will occasionally do things to the contents
of that directory that assume it is neither read nor written outside a hook, and
the results of such interactions can only be undefined.</p>

<p>The only files you should be writing into the charm directory should be written
by hooks, and accessed only by hooks. If everything in your charm directory
went away, that should be considered a <em>management</em> failure only; the software
installed should continue to run, using its last known good configuration, and
should do this by virtue of never having had the opportunity to observe the
change.</p>

<p>Finally, any file written at runtime constrains all future implementations of
the charm. When <a href="./authors-charm-upgrades.html">upgrading a charm</a>, any
change that would cause runtime state to be overwritten will cause juju to abort
the operation and hand over to the user for resolution. This is inconvenient for
the users and makes everyone look bad.</p>

<p>You need to be especially aware of these guidelines when writing python code.
Python packages run without bytecode suppression will write <code>.pyc</code> files into
the package, and subsequent attempts to move or remove the package will fail:
the .pyc files are treated as important hook-relevant runtime state, to be
recorded and tracked, and the loss of their directory will put the unit into
an upgrade error state as referenced above.</p>
</section>

          </article>
        </div>
      </div>
    </section>
    <div class="shadow"></div>
    <footer class="global clearfix" role="contentinfo">
  <div class="row">
    <div class="inner-wrapper">
      <nav role="navigation" class="clearfix">
        <ul class="footer-a">
          <li class="grid-3 first-col">
            <h4><a href="/get-started">Get started</a></h4>
            <ul>
              <li class="page_item page-item-20"><a href="https://juju.ubuntu.com/get-started/local/">Local</a></li>
              <li class="page_item page-item-22"><a href="https://juju.ubuntu.com/get-started/amazon/">Amazon Web Services</a></li>
              <li class="page_item page-item-18"><a href="https://juju.ubuntu.com/get-started/hp-cloud/">HP Cloud</a></li>
              <li class="page_item page-item-16"><a href="https://juju.ubuntu.com/get-started/rackspace/">Rackspace</a></li>
              <li class="page_item page-item-3596"><a href="https://juju.ubuntu.com/get-started/openstack/">Openstack</a></li>
              <li class="page_item page-item-3600"><a href="https://juju.ubuntu.com/get-started/maas/">MAAS</a></li>
            </ul>
          </li>
          <li class="grid-3">
            <h4><a href="/resources">Resources</a></h4>
            <ul>
              <li><a href="http://juju.ubuntu.com/docs">Documentation</a></li>
              <li><a href="/resources/videos/">Videos</a></li>
              <li><a href="http://uistage.jujucharms.com:8080/">Juju GUI demo site</a></li>
            </ul>
          </li>
          <li class="grid-3">
            <h4><a href="/community">Community</a></h4>
            <ul>
              <li class="page_item page-item-28"><a href="https://juju.ubuntu.com/community/juju-blog/">Juju Blog</a></li>
              <li class="page_item page-item-4262"><a href="https://juju.ubuntu.com/community/weekly-charm-meeting/">Weekly Charm Meeting</a></li>
              <li class="page_item page-item-4036"><a href="https://juju.ubuntu.com/community/charmers/">Charmers</a></li>
              <li><a href="https://lists.ubuntu.com/mailman/listinfo/juju">Mailing List</a></li>
              <li><a href="http://webchat.freenode.net/?channels=juju">Chat</a></li>
              <li><a href="http://askubuntu.com/questions/tagged/juju?sort=faq&pagesize=50">FAQ</a></li>
            </ul>
          </li>
          <li class="grid-3 last-col">
            <h4><a href="https://launchpad.net/juju">Code</a></h4>
            <ul>
              <li><a href="https://launchpad.net/juju-core">Juju Core</a></li>
              <li><a href="https://launchpad.net/charms">Charms</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <div class="row no-border">
    <div class="legal inner-wrapper">
      <p>&copy; 2013 Canonical Ltd. Ubuntu and Canonical are registered trademarks of Canonical Ltd.</p>
      <p><a href="https://bugs.launchpad.net/juju-website/+filebug">Report a bug on this site</a></p>
    </div>
  </div>
</footer>

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
    <script src="//d38yea5fb4e2oh.cloudfront.net/jquery.stacktack.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
  </body>
</html>

