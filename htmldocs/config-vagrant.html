<!DOCTYPE html> 
<html>
<!--Head-->
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Juju Documentation</title>
		<script src="/wp-content/themes/ubuntu/library/js/all-yui.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Ubuntu:400,300,300italic,400italic,700,700italic|Ubuntu+Mono" rel="stylesheet" type="text/css" />
		<link rel="stylesheet" type="text/css" media="screen" href="https://juju.ubuntu.com/wp-content/themes/juju-website/css/reset.css" />
 		<link rel="shortcut icon" href="//assets.ubuntu.com/sites/ubuntu/latest/u/img/favicon.ico" />
		<link rel="stylesheet" type="text/css" media="screen" href="//assets.ubuntu.com/sites/guidelines/css/latest/ubuntu-styles.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="//assets.ubuntu.com/sites/ubuntu/latest/u/css/global.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="https://juju.ubuntu.com/wp-content/themes/juju-website/css/960.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="https://juju.ubuntu.com/wp-content/themes/juju-website/css/home-new.css" />
		<link rel="stylesheet" id="stacktack-css" href="https://juju.ubuntu.com/wp-content/plugins/stacktack/css/stacktack.min.css?ver=3.4.2" type="text/css" media="all" />
		<link href="./css/main.css" rel="stylesheet" type="text/css" />
		
		<!--[if lt IE 9]>
		<script type="text/javascript" src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>
<!--End-Head-->








  <body class="resources">
  	
<!--Header-->

	<header class="banner global" role="banner">
		<nav role="navigation" class="nav-primary nav-right">
			<div class="logo">
				<a class="logo-ubuntu" href="https://juju.ubuntu.com/">
					<img width="118" height="27" src="//assets.ubuntu.com/sites/ubuntu/latest/u/img/logo.png" alt="Juju logo" />
					<span>Juju</span>
				</a>
			</div>
			<ul>
				<li class="accessibility-aid"><a accesskey="s" href="#main-content">Jump to content</a></li>
				<li class="page_item page-item-8"><a href="https://juju.ubuntu.com/charms/">Charms</a></li>
				<li class="page_item page-item-10"><a href="https://juju.ubuntu.com/features/">Features</a></li>
				<li class="page_item page-item-12"><a href="https://juju.ubuntu.com/deployment/">Deploy</a></li>
				<li class="page_item page-item-14"><a href="https://juju.ubuntu.com/resources/">Resources</a></li>
				<li class="page_item page-item-16"><a href="https://juju.ubuntu.com/community/">Community</a></li>
				<li class="page_item page-item-18"><a href="https://juju.ubuntu.com/download/">Install Juju</a></li>
			</ul>
			<div id="box-search">
				<form class="search-form" method="get" id="searchform" action="https://juju.ubuntu.com/">
					<label class="off-left" for="s">Search:</label>
					<input class="form-text" type="text" value="" name="s" id="s" />
					<button class="off-left form-submit" type="submit" id="searchsubmit">Search</button>
				</form>		
			</div>
		</nav>	
	</header>
<!--End-Header-->
<!--Preamble-->
<div class="wrapper">
  <div id="main-content" class="inner-wrapper" role="main">
    <div class="row no-border">
     <div class="header-navigation-secondary"></div>
     <h2 class="pagetitle">Juju documentation</h2>
    </div>
    <section id="content" class="container-12">
      <div class="grid-12 doc-container">
        <div id="navlinks" class="grid-3 doc-navigation">LINKS</div>
        <div class="grid-9 doc-content">
<!--End-Preamble-->
          <article>
            <section><h1>Using Juju with Vagrant</h1>


<p>The Juju Vagrant images are a way of extending the portability and ease of use of LXC containers to other platforms. The initial image is based on the Ubuntu Cloud Images. Juju is configured to use the local LXC provider and is preseeded with the latest 12.04 LTS release so deployments should be relatively fast.</p>
<p>Using these images gives you a couple of things:</p>
<ul>
<li>A Vagrant development environment for developing your charms.</li>
<li>The Juju GUI accessible locally through your browser.</li>
<li>A functional, self contained Juju environment.</li>
</ul>
<p>In short, enough of an environment to write and test charms or sandbox your Juju deployments.</p>

<p class="note"><strong>Warning:</strong> While these images are based on the Ubuntu Cloud Images, they should be treated as beta quality images. Should you encounter a problem, please pop into #juju on Freenode and ask Ben (utlemming) and the Juju community questions. Obviously, as this is a beta image, please be patient if the image fails to work for you first time.</p>

<h2>Installing</h2> 
<p>The following instructions will help you get the environment set up:</p>
<section class="code-example code-overflow">
                <nav class="control">
                  <a href="." class="selected" data-action="ubuntu">Ubuntu</a>
                  <a href="." class="" data-action="macosx">Mac OSX</a>
                  <a href="." class="" data-action="windows">Windows</a>
                </nav>
                <div class="terminal-wrap">
                  <div data-section="ubuntu">
                    <p>To install vagrant and the other required tools on Ubuntu, run:</p>
<pre class="prettyprint lang-bash">sudo apt-get update
sudo apt-get -y install virtualbox vagrant sshuttle</pre>
                  </div>

<div data-section="macosx">
<ol>
<li>Fetch and install VirtualBox from <a href="https://www.virtualbox.org/">virtualbox.org</a></li>
<li>Install Vagrant from <a href="http://www.vagrantup.com/downloads.html">vagrantup.com</a></li>
<li><p>(optional) Install Sshuttle. You can do this via <code>homebrew</code>:</p>
<pre class="prettyprint lang-bash">brew install sshuttle</pre>
<p>Or you can get the source from <a href="https://github.com/apenwarr/sshuttle">github.com/apenwarr/sshuttle</a></p></li>
</ol>
</div>
<div data-section="windows">
<ol>
<li>Fetch and install VirtualBox from <a href="https://www.virtualbox.org/">virtualbox.org</a></li>
<li>Install Vagrant from <a href="http://www.vagrantup.com/downloads.html">vagrantup.com</a></li>
<li><p>(optional) Install Sshuttle. (this requires the <a href="http://nodejs.org/download/">node.js binary for Windows</a>)</p>
<p>Run: <code>npm install sshuttle</code></p>
</li>
</ol>

</div>
</div>
<h2>Choosing "boxes"</h2>
<p>Vagrant uses "boxes," as a way of distributing the virtual machine images. We have put all our boxes on the Ubuntu Cloud Images site. The quick links are:</p>
<h3>12.04 LTS:</h3>
<p><a href="http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-juju-vagrant-disk1.box">
precise-server-cloudimg-amd64-juju-vagrant-disk1.box</a></p>
<p><a href="http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-i386-juju-vagrant-disk1.box">
precise-server-cloudimg-i386-juju-vagrant-disk1.box</a></p>
<p>
If you are unsure which one to fetch, use the 12.04 builds, as this is the long term support release of Ubuntu. Most modern machines are now 64bit (x86_64 AMD64). If you need other versions of Ubuntu, check out the <a href="http://cloud-images.ubuntu.com/vagrant/">Cloud Images</a></p>

<h2>Getting started!</h2>
<p>Vagrant makes getting started really easy.</p>
          <span class="number" > 1 </span>
          <div class="step">
          <p>Choose a directory to work in. This directory will be shared with the guest, and contain the vagrant configuration for the machine. Run:</p>
<pre class="prettyprint lang-bash">vagrant box add JujuBox &LT;URL&GT;</pre>
The URL can be from the list above or a local file if you have already downloaded a suitable box. For example: 
<pre class="prettyprint lang-bash">vagrant box add JujuBox http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-juju-vagrant-disk1.box</pre>
<p>This will download the box from the URL you chose above.The box will be given the name of "JujuBox"</p>
          </div>


          <span class="number" > 2 </span>
          <div class="step">
          <h2>Initialise and start</h2>
<p>Initialize this environment by running:</p>
<pre class="prettyprint lang-bash">vagrant init JujuBox</pre>

<p>Then start it with:</p> 
<pre class="prettyprint lang-bash">vagrant up</pre>
<p>The box will start and configure Juju for you.</p>
<img src="./media/config-vagrant-step02.png" width='600' alt="Step two"> 
          </div>

          <span class="number" > 3 </span>
          <div class="step">
          <h2>Access the GUI</h2>
<p>In order to access the GUI, go to the url: <a href="http://127.0.0.1:6080">http://127.0.0.1:6080</a>
Until the Juju GUI is deployed, you will see a status page. Wait a few minutes, referesh the page. Once the GUI is deployed, it will display the password on the login page.</p>
<img src="./media/config-vagrant-step03.png" width='600' alt="Step three"> 
<p>The GUI is only accessible from your local host. From there you will be able to deploy charms, add relations, etc.</p> 
          </div>


<h2>Vagrant lifecycle</h2>
<p>To shut down the machine run <code>vagrant halt</code></p>
<p>To destroy it, run <code>vagrant destroy</code></p>
<p>To ssh in, run <code>vagrant ssh</code></p>


<h2>SSHuttle (optional) </h2>
<p>If you  want to use this environment for developing Juju Charms, you can do so with the aid of SSHuttle. SSHuttle is a slick tool for using SSH as a VPN. When used with the Juju Quickstart images, it means that you can have a completely disposable development environment, you can use your preferred editor, and access your charms locally.</p>
<p>The Juju Quickstart uses 10.0.3.0/24 as the LXC network. To grant local access to that group, run:</p>
<pre class="prettyprint lang-bash">sshuttle -e 'ssh -o UserKnownHostsFile=/dev/null vagrant@localhost:2222' 10.0.3.0/24</pre>
<p>Use the password "vagrant"</p>


             </section>
          </article>
<!--Postamble-->
        </div>
      </div>
    </section>
  </div>
</div>
<!--End-Postamble-->
<!--Footer-->
	<footer class="global clearfix" role="contentinfo">
		<nav role="navigation">
			<div class="footer-a">
				<div class="clearfix">
					<ul>
						<li>
							<h2><a href="/">Juju</a></h2>
							<ul>
								<li><a href="/charms">Charms</a></li>
								<li><a href="/features">Features</a></li>
								<li><a href="/deployment">Deployment</a></li>
							</ul>
						</li>
						<li>
							<h2><a href="/resources">Resources</a></h2>
							<ul>
								<li><a href="/resources/juju-overview/">Overview</a></li>
								<li><a href="/docs/">Documentation</a></li>
								<li><a href="/resources/the-juju-gui/">The Juju web UI</a></li>
								<li><a href="/docs/authors-charm-store.html">The charm store</a></li>
								<li><a href="/docs/getting-started.html#test">Tutorial</a></li>
								<li><a href="/resources/videos/">Videos</a></li>
								<li><a href="/resources/easy-tasks-for-new-developers/">Easy tasks for new developers</a></li>
							</ul>
						</li>
						<li>
							<h2><a href="/community">Community</a></h2>
							<ul>
								<li><a href="/community/blog/">Juju Blog</a></li>
								<li><a href="/events/">Events</a></li>
								<li><a href="/community/weekly-charm-meeting/">Weekly charm meeting</a></li>
								<li><a href="/community/charmers/">Charmers</a></li>
								<li><a href="/docs/authors-charm-writing.html">Write a charm</a></li>
								<li><a href="/docs/contributing.html">Help with documentation</a></li>
								<li><a href="https://bugs.launchpad.net/juju-core/+filebug">File a bug</a></li> <li><a href="/labs/">Juju Labs</a></li>
							</ul>
						</li>
						<li>
							<h2><a href="https://jujucharms.com/sidebar/">Try Juju</a></h2>
							<ul>
								<li><a href="https://jujucharms.com/">Charm store</a></li>
								<li><a href="/download/">Download Juju</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		<div class="legal clearfix">
			<p>&copy; 2013-2014 Canonical Ltd. Ubuntu and Canonical are registered trademarks of <a href="http://canonical.com">Canonical Ltd</a>.</p>
		</div>
	</footer>

<!--End-Footer-->



<!--Scripts-->
    <script src="//google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sunburst"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.14/jquery-ui.min.js"></script>
    <script src="//d38yea5fb4e2oh.cloudfront.net/jquery.stacktack.min.js"></script>    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="./js/main.js"></script>
    <script type="text/javascript" src="./js/jquery.details.js"></script>
    <script src="//assets.ubuntu.com/sites/ubuntu/latest/u/js/core.js"></script>
    <script src="//assets.ubuntu.com/sites/ubuntu/latest/u/js/global.js"></script>
    <!-- google analytics -->
    <script>
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-1018242-41']);
   _gaq.push(['_trackPageview']);
  
   (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();
    </script>
<!--End-Scripts-->







</body></html>
