extends inc/layout

block vars
  - var title='Destroying Services'
  - var page='charms-destroy'

block content
  article.
    <section id ="charms-destroy">

      <h1>Destroy Stuff</h1>
       <p>Juju isn't just about magically spinning up services as and when you need them, it is also about quickly, sanely and efficiently destroying everything when you no longer need it. This section deals with the sort of things you can ruthlessly destroy, and how to go about it.</p>

      <h1>Destroying/Removing Services</h1>
      <p>Once a service is no longer required it can be removed with a simple command.</p>
      <pre><code>juju destroy-service &LT;service-name&GT;</code></pre>
      <p>Before you take this step though, it is important to remove any relationships so that it can be removed cleanly, otherwise an error state may exist elsewhere.</p>
      <p>A service can take a while to "die", but if running a juju status reveals that the service is listed as dying, but also reports an error state, then the zombied service will still be hanging around. See <a href="troubleshooting.html#die">"Why won't it just die?" in the troubleshooting section.</a>

      <p class="warning"><strong>Warning!:</strong>Destroying a service which has active relations with another running service can cause errors in both services. You should destroy any relationships first if possible. </p>  

      <p class="note"><strong>Note:</strong> Destroying a service removes that service, but not any nodes which may have been created for it to run on.</p>

      <h1>Destroying/Removing Units</h1>
      <p>It is also possible to spin down individual units, or a sequence of units running a service:</p>
      <pre><code>juju remove-unit mediawiki/1</code></pre>
      <p>The 'remove-unit' command is an alias for 'destroy-unit', and can be used interchangeably, so the above is identical to:</p>
      <pre><code>juju destroy-unit mediawiki/1</code></pre> 
      <p>If you wish to remove more than one unit, you may list them all following the command:</p>
      <pre><code>juju remove-unit mediawiki/1 mediawiki/2 mediawiki/3 mysql/2 ...</code></pre>
      <p class="note"><strong>Note:</strong> As with destroying a service, removing units will NOT actually remove any instances which were created, it only removes the service unitsm.</p> 
      
      <h1>Destroying/Removing machines</h1>
      <p>Instances or machines which have no currently assigned workload can be removed from your cloud using the following command:
      <pre><code>juju destory-machine &LT;number&GT;</code></pre>
      <p>A machine which currently idle will be removed almost instantaneously from the cloud, along with anything else which may have been on the instance which juju was not aware of. To prevent accidents and awkward moments with running services, it is not possible to remove an instance which is currently allocated to a service. If you try to do so, you will get a polite error message in the form:</p>
      <pre><code>error: no machines were destroyed: machine 3 has unit "mysql/0" assigned</code></pre>

      <h1>Destroying Environments</h1>
       <p>To completely remove and terminate all running services, the instances they were running on and the bootstrap node itself, simply run the command:</p>
       <pre><code>juju destroy-environment </code></pre>
       <p> This will completely remove all instances running under the current environment profile. You can of course specify a different environment profile using the -e switch:</p>
       <pre><code>juju destroy-environment -e mycloud </code></pre>
       <p>You should be pretty sure that this is what you want to do, as there is no undo command! Everything in the selected environment will be removed.</p>  
 
      <h1>Destroying Relations</h1>
       <p>To remove relations between deployed services, you should see <a href="charms-relations.html#removing"> the docs section on charm relationships</a></p>.
    </section>
   
